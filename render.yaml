services:
  # Web Service - Hosts dashboard and serves data files
  - type: web
    name: hockey-stats-dashboard
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./Dockerfile
    dockerCommand: python web_server.py
    healthCheckPath: /health
    envVars:
      - key: PORT
        value: 10000
      - key: DATA_DIR
        value: /data
    disk:
      name: hockey-data
      mountPath: /data
      sizeGB: 1

  # Cron Job - Runs scraper weekly on Sunday at 2 AM UTC
  - type: cron
    name: hockey-stats-scraper-job
    env: docker
    region: oregon
    plan: free
    dockerfilePath: ./Dockerfile
    dockerCommand: python scheduled_scraper.py
    schedule: "0 2 * * 0"
    envVars:
      - key: DATA_DIR
        value: /data
    disk:
      name: hockey-data
      mountPath: /data
      sizeGB: 1
